<style>
  /* CSS Reset for WordPress compatibility - RIGHT BANNER */
  .aff-banner-advertnative-right,
  .aff-banner-advertnative-right * {
    box-sizing: border-box !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  .aff-banner-advertnative-right {
    position: fixed !important;
    bottom: calc(33.33vh) !important;
    right: 20px !important;
    z-index: 99999 !important;
    cursor: pointer !important;
    animation: aff-banner-advertnative-bounceIn-right 0.8s ease-out, aff-banner-advertnative-wiggle-right 0.6s ease-in-out 2.5s infinite !important;
    transition: transform 0.3s ease !important;
  }

  .aff-banner-advertnative-right::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 120px;
    height: 120px;
    border-radius: 50% !important;
    background: rgba(255, 107, 107, 0.3);
    transform: translate(-50%, -50%);
    animation: aff-banner-advertnative-circularPulse-right 2s infinite 1s;
    pointer-events: none;
    z-index: -1;
  }

  .aff-banner-advertnative-right img {
    width: 120px !important;
    height: 120px !important;
    border-radius: 50% !important;
    display: block !important;
  }

  .aff-banner-advertnative-right .aff-banner-advertnative-close-right {
    position: absolute;
    top: -8px;
    right: -8px;
    background: #ff6b6b;
    color: #fff;
    border: 2px solid #fff;
    border-radius: 50% !important;
    width: 24px !important;
    height: 24px !important;
    font-size: 16px !important;
    font-weight: bold !important;
    line-height: 20px !important;
    cursor: pointer;
    z-index: 100000;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    margin: 0 !important;
    padding: 0 !important;
    box-sizing: border-box !important;
  }

  .aff-banner-advertnative-right .aff-banner-advertnative-close-right:hover {
    background: #ff5252;
    transform: scale(1.1);
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  }

  @keyframes aff-banner-advertnative-bounceIn-right {
    0% {
      opacity: 0;
      transform: scale(0.3) translateY(-50px);
    }
    50% {
      opacity: 1;
      transform: scale(1.05) translateY(10px);
    }
    70% {
      transform: scale(0.9) translateY(-5px);
    }
    100% {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
  }

  @keyframes aff-banner-advertnative-circularPulse-right {
    0% {
      transform: translate(-50%, -50%) scale(1);
      opacity: 0.7;
    }
    50% {
      transform: translate(-50%, -50%) scale(1.3);
      opacity: 0.3;
    }
    100% {
      transform: translate(-50%, -50%) scale(1.6);
      opacity: 0;
    }
  }

  @keyframes aff-banner-advertnative-wiggle-right {
    0%, 100% { transform: rotate(0deg) scale(1); }
    10% { transform: rotate(-8deg) scale(1.05); }
    20% { transform: rotate(7deg) scale(1.05); }
    30% { transform: rotate(-7deg) scale(1.05); }
    40% { transform: rotate(6deg) scale(1.05); }
    50% { transform: rotate(-4deg) scale(1.03); }
    60% { transform: rotate(4deg) scale(1.03); }
    70% { transform: rotate(-2deg) scale(1.02); }
    80% { transform: rotate(2deg) scale(1.02); }
    90% { transform: rotate(-1deg) scale(1.01); }
  }

  /* Mobile responsive - Thu nhỏ banner trên điện thoại */
  @media only screen and (max-width: 768px) {
    .aff-banner-advertnative-right {
      bottom: calc(25vh) !important;
      right: 15px !important;
    }

    .aff-banner-advertnative-right::before {
      width: 150px !important;
      height: 150px !important;
    }

    .aff-banner-advertnative-right img {
      width: 150px !important;
      height: 150px !important;
    }

    .aff-banner-advertnative-right .aff-banner-advertnative-close-right {
      width: 20px !important;
      height: 20px !important;
      font-size: 14px !important;
      line-height: 16px !important;
      top: -6px !important;
      right: -6px !important;
    }
  }

  /* Extra small mobile - Thu nhỏ hơn nữa */
  @media only screen and (max-width: 480px) {
    .aff-banner-advertnative-right {
      bottom: calc(20vh) !important;
      right: 10px !important;
    }

    .aff-banner-advertnative-right::before {
      width: 130px !important;
      height: 130px !important;
    }

    .aff-banner-advertnative-right img {
      width: 130px !important;
      height: 130px !important;
    }

    .aff-banner-advertnative-right .aff-banner-advertnative-close-right {
      width: 18px !important;
      height: 18px !important;
      font-size: 12px !important;
      line-height: 14px !important;
      top: -5px !important;
      right: -5px !important;
    }
  }

</style>

<!-- Banner bên phải -->
<div class="aff-banner-advertnative-right" id="affBannerAdvertnativeRight">
  <img src="https://ik.imagekit.io/blgqpamjtp/ChatGPT%20Image%20Nov%2013,%202025,%2012_31_57%20AM.png?updatedAt=1763003190157" alt="Flash Sale">
  <button class="aff-banner-advertnative-close-right" id="affBannerAdvertnativeCloseRight">×</button>
</div>

<script>
(function(){
  // Extract parameters from URL path: /ads/right.html/ref_code/image_url
  const pathParts = window.location.pathname.split('/').filter(p => p);
  let refCode = '';
  let imageUrl = 'https://ik.imagekit.io/blgqpamjtp/ChatGPT%20Image%20Nov%2013,%202025,%2012_31_57%20AM.png?updatedAt=1763003190157';
  
  // Find the index of right.html in the path
  const htmlIndex = pathParts.findIndex(p => p.includes('right.html'));
  if (htmlIndex !== -1) {
    if (pathParts[htmlIndex + 1]) {
      refCode = pathParts[htmlIndex + 1];
    }
    if (pathParts[htmlIndex + 2]) {
      // Reconstruct image_url (may contain slashes)
      imageUrl = decodeURIComponent(pathParts.slice(htmlIndex + 2).join('/'));
    }
  }

  const banner = document.getElementById('affBannerAdvertnativeRight');
  const closeBtn = document.getElementById('affBannerAdvertnativeCloseRight');
  const imgElement = banner.querySelector('img');
  
  // Set image URL if provided
  if (imageUrl) {
    imgElement.src = imageUrl;
  }
  
  // Build link with ref_code
  const link = refCode ? `https://s.shopee.vn/${refCode}` : 'https://s.shopee.vn/5VMxs78ckR';
  const clickKey = 'affBannerAdvertnativeClickedRight';

  banner.addEventListener('click', () => {
    if (!sessionStorage.getItem(clickKey)) {
      sessionStorage.setItem(clickKey, 'clicked');
      window.open(link, '_blank');
    } else {
      banner.remove();
    }
  });

  closeBtn.addEventListener('click', (e) => {
    e.stopPropagation();
    e.preventDefault();

    const closeKey = 'affBannerAdvertnativeClosedRight';

    if (!sessionStorage.getItem(closeKey)) {
      sessionStorage.setItem(closeKey, 'clicked');
      window.open(link, '_blank');
    } else {
      banner.remove();
    }
  });

})();
</script>

